<div class="main-content-wrapper">
    <div>
        <mat-card>
          <mat-card-header>
            <mat-card-title class="header1">
              Cancelled Appointments
            </mat-card-title>
          </mat-card-header>
        </mat-card>
        <div class="table-wrapper">
          <div class="loadSpinner" *ngIf="!dataSource">
            <div class="d-flex justify-content-center">
              <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">
                <span class="visually-hidden">Loading...</span>
              </div>
            </div>
          </div>
        <table *ngIf="dataSource" fxHide.lt-md="true" class="table-hover" mat-table [dataSource]="dataSource.data" class="mat-elevation-z8">

            <!-- title Column -->
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef> Appointment Title </th>
              <td class="cell_wrapper" mat-cell *matCellDef="let element" (mouseover)="highlightRow(element)"
              [ngClass] = "{'highlight' : element.name == selectedName}"> {{element.title.substr(0,65)}}  <span *ngIf="element.title.length >= 65">...</span></td>
            </ng-container>

            <!-- name Column -->
            <ng-container matColumnDef="name" >
              <th mat-header-cell *matHeaderCellDef> Organization/Individual Name </th>
              <td class="cell_wrapper" mat-cell *matCellDef="let element"(mouseover)="highlightRow(element)"
              [ngClass] = "{'highlight' : element.name == selectedName}"
              style="padding-top: 20px;"> {{element.name.substr(0,65) }} <span *ngIf="element.name.length >= 65">...</span>
              <p style="color: blue; margin-top: 5px; margin-left: -7px; font-weight: 600;">
                <a (click)="openDialogBox('Details', element)" matTooltip="View full detail of this appointment">View More Details</a>
              </p>
              </td>
            </ng-container>


            <!-- appointment_description Column -->
            <ng-container matColumnDef="appointment_description">
              <th mat-header-cell *matHeaderCellDef> Appointment Description </th>
              <td class="cell_wrapper" mat-cell *matCellDef="let element" (mouseover)="highlightRow(element)"
              [ngClass] = "{'highlight' : element.name == selectedName}" > {{element.appointment_description.substr(0,30) }} <span *ngIf="element.appointment_description.length >= 30">...</span>
            <p style="color: blue; margin-top: 5px;" *ngIf="element.appointment_description.length >= 30">
              <a (click)="openDialogBox('Details', element)" matTooltip="View full detail of this appointment">View details</a>
            </p>
            </td>
            </ng-container>

            <!-- appointment_date Column -->
            <ng-container matColumnDef="appointment_date">
              <th mat-header-cell *matHeaderCellDef> Appointment Date </th>
              <td class="cell_wrapper date_time_wrapper" mat-cell *matCellDef="let element" (mouseover)="highlightRow(element)"
              [ngClass] = "{'highlight' : element.name == selectedName}"> {{element.appointment_date | date: 'mediumDate'}} </td>
            </ng-container>

            <!-- appointment_time Column -->
            <ng-container matColumnDef="appointment_time">
                <th mat-header-cell *matHeaderCellDef> Appointment Time </th>
                <td class="cell_wrapper date_time_wrapper" mat-cell *matCellDef="let element" (mouseover)="highlightRow(element)"
                [ngClass] = "{'highlight' : element.name == selectedName}"> {{element.appointment_time}} </td>
              </ng-container>

            <!-- Operation Column -->
            <ng-container matColumnDef="operation">
                <th mat-header-cell *matHeaderCellDef> Operation </th>
                <td mat-cell *matCellDef="let element"  class="operation_wrapper date_time_wrapper" (mouseover)="highlightRow(element)"
                [ngClass] = "{'highlight' : element.name == selectedName}">
                    <a (click)="openDialogBox('Update', element)" matTooltip="Edit this appointment">
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                    </a>
                    <a (click)="openDialogBox('Delete', element)" matTooltip="Cancel this Appointment">
                        <i class="fa fa-trash-o" aria-hidden="true"></i>
                    </a>
                    <a (click)="openDialogBox('Email', element)" matTooltip="Send a mail to the individual/organization">
                      <i class="fa fa-envelope" aria-hidden="true"></i>
                  </a>
                </td>
              </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                >
            </tr>
          </table>
          </div>
<!-- For Small screen -->

          <table *ngIf="dataSource" fxHide.gt-sm="true" class="table-hover" mat-table [dataSource]="dataSource.data" class="mat-elevation-z8">

            <!-- name Column -->
            <ng-container matColumnDef="title" >
              <th mat-header-cell *matHeaderCellDef> Appointment Title  </th>
              <td class="cell_wrapper" mat-cell *matCellDef="let element"(mouseover)="highlightRow(element)"
              [ngClass] = "{'highlight' : element.name == selectedName}"
              style="padding-top: 20px;"> {{element.name.substr(0,65) }} <span *ngIf="element.name.length >= 65">...</span>
              <p style="color: blue; margin-top: 5px; margin-left: -7px;">
                <a (click)="openDialogBox('Details', element)" matTooltip="View full detail of this appointment">View More Details</a>
              </p>
              </td>
            </ng-container>

            <!-- Operation Column -->
            <ng-container matColumnDef="operation">
                <th mat-header-cell *matHeaderCellDef> Operation </th>
                <td mat-cell *matCellDef="let element"  class="operation_wrapper date_time_wrapper" (mouseover)="highlightRow(element)"
                [ngClass] = "{'highlight' : element.name == selectedName}">
                    <a (click)="openDialogBox('Update', element)" matTooltip="Edit this appointment">
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                    </a>
                    <a (click)="openDialogBox('Delete', element)" matTooltip="Cancel this Appointment">
                        <i class="fa fa-trash-o" aria-hidden="true"></i>
                    </a>
                    <a (click)="openDialogBox('Email', element)" matTooltip="Send a mail to the individual/organization">
                      <i class="fa fa-envelope" aria-hidden="true"></i>
                    </a>
                  </td>
                </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns2;"
                  >
            </tr>
          </table>
          <mat-paginator class="paginator-wrapper"
          [length]="this.resultLength"

          [pageSizeOptions]="[5, 10, 25, 100]"
           (page) ="onPageChanged($event)"
           [showFirstLastButtons]="true"
          >
          </mat-paginator>


</div>
